---
title       : "Data Analysis Opening"
subtitle    : "A case-based approach"
author      : "马明"
job         : "Big Data Platform Architect and Data Scientist."
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : mathjax            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

##  Data Related Terms  
<img src="ai_data-science-diagram.jpg" width="800px" height="600px" />

--- class #id

## What a good data analysis come from?  

> - <q> A good data analysis come from a good __question__.</q>

--- .bigger   

## Data Analysis Basic Introduction  

> - Classical Method 
> - Exploratory Data Analysis 
> - Bayesian Analysis 

--- .class #id

## 有趣的事：Paul,the psychic octopus 
<img src="Paul_the_Octopus_picks_Spain_over_Germany_in_2010_World_Cup_semi-final_3.jpg" width="600px" height="400px" />
> - 章鱼保罗，曾经连续预测正确世界杯足球比赛结果8次。
> - 你认为章鱼保罗具有某种神奇的预测能力吗？

--- .class #id

## Case 1 : What's the problem?  
<img src="FDR.png" width="800px" height="400px" />
> - 1936年美国总统大选，著名期刊Literary Digest采访其100万读者，得到有43%的人选择罗斯福。   
> - 所以，判断罗斯福会输。 
> - 结果，罗斯福以62%的支持度赢得总统大学。因此该期刊在不久后停业。 

--- .class #id  

### Question1 ：为什么认为兰登会获得大选胜利？   
> - 点估计 ( point estimate )  
> - 正态分布( normal distribution )  
> - Z分数( Z score )  
> - P-value 和假设检验
> - 置信区间( confident interval )
> - 显著性水平(significent level)  

--- .class #id  

### Question2 : 预测结果和实际情况的偏离是由什么原因引起的？ 

--- .class #id

## Case 2 : 泰坦尼克号  
Question ：泰坦尼克号上获救的人是否完全随机呢？    
  
Titanic DataSet  
```{r echo=FALSE,warning=FALSE,message=FALSE}
titan <- read.csv("../Titanic.csv",header=TRUE)
library('knitr')
kable(head(titan), format = "markdown")
```  

--- .class #id  

## 舱位等级与年龄的boxplot  
```{r echo=FALSE}
boxplot(titan$Age ~ titan$PClass, xlab = "Class", ylab = "Age", col = c("red"))
```  

--- .class #id

### 获救的人和年龄或者舱位等级有关系吗？ 
```{r echo=FALSE,message=FALSE,warning=FALSE}
library(ggplot2)
ggplot(titan,aes(x=Age,y=PClass,colour=factor(Survived))) +
  geom_point() + ggtitle(label =  "Titanic Age by Pclass")
```


--- .class #id  

### 获救的人和性别有关系吗？  
```{r echo=FALSE,message=FALSE,warning=FALSE}
library(sqldf)
new_data <- sqldf("select Sex,Survived,count(*) as cnt from titan group by Sex,Survived")
p <-ggplot(new_data, aes(Sex, cnt))
p +geom_bar(stat = "identity", aes(fill = factor(Survived)))
```  

--- .class #id  

## T-test  
H0: There is no significant difference in the chances of survival of upper and lower class  
H1: There is a better chance of survival for upper class passengers  

```{r echo=FALSE}
#calculate z test
#create a new data frame for upper class passengers
new_data <- subset(titan, titan$PClass == '1st')
#function for z test
z.test2 = function(a, b, n){
 sample_mean = mean(a)
 pop_mean = mean(b)
 c = nrow(n)
 var_b = var(b)
 zeta = (sample_mean - pop_mean) / (sqrt(var_b/c))
 return(zeta)
}
#call function
z.test2(new_data$Survived, titan$Survived, new_data)
```  

--- .class #id  

## Chi-Square Test  
```{r echo=FALSE}
#chi-square test between Survived, Sex, Pclass
chisq.test(titan$Survived, titan$Sex)  
#another method of chi-square test
summary(table(titan$Survived,titan$PClass))
```

--- .class #id

### 回归问题(Regression Analysis)  
问题：如何通过父母的身高预测孩子的身高？  
```{r echo=F,message=F,warning=F}
library(UsingR)
data(galton)
ggplot(galton,aes(parent,child)) +
  geom_point(color='darkblue')
```     

--- .class #id  

### 原始的回归问题  
```{r echo=FALSE,warning=FALSE}
library(dplyr)
freqData <- as.data.frame(table(galton$child, galton$parent))
names(freqData) <- c("child", "parent", "freq")
freqData$child <- as.numeric(as.character(freqData$child))
freqData$parent <- as.numeric(as.character(freqData$parent))
g <- ggplot(filter(freqData, freq > 0), aes(x = parent, y = child))
g <- g  + scale_size(range = c(2, 20), guide = "none" )
g <- g + geom_point(colour="grey50", aes(size = freq+20, show_guide = FALSE))
g <- g + geom_point(aes(colour=freq, size = freq))
g <- g + scale_colour_gradient(low = "lightblue", high="white")                 
g
```   

--- .class #id

### 聚类分析( Clustering Analysis ) 
调查一个大型金融组织的30个部门，每个部门35人。  
Chatterjee-Price Attitude Data   
```{r echo=F,message=F,warning=F}
library(datasets)
kable(head(attitude), format = "markdown")
```

--- .class #id

## Kmeans algorithm  
```{r echo=F,message=F,warning=F}
# Subset the attitude data
dat = attitude[,c(3,4)]

# Plot subset data
plot(dat, main = "% of favourable responses to
     Learning and Privilege", pch =20, cex =2)
```

--- .class #id

## The Result of Kmean   
```{r echo=F,message=F,warning=F}
# Perform K-Means with 2 clusters
set.seed(7)
km1 = kmeans(dat, 2, nstart=100)

# Plot results
plot(dat, col =(km1$cluster +1) , main="K-Means result with 2 clusters", pch=20, cex=2)
```  

--- .class #id

## Special Case 1 : Why Big Data?  
> - Chebyshev Inequality  
随机变量$X$的分布为 $P$，其均值为 $\mu$，那么
$$P(|X-\mu|\geq b) \leq \frac{Var(X)}{b^2}$$  
> - Insight, Efficiency, Cost Reduction

--- .class #id  

## Special Case 2 : Try to get something without data.  

> - If employee works with low effiency, who will responsible for?  

--- .class #id  

## End  
> - <q>  __Questions?__</q>

--- .bigger .center
